<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="pyper_control_panel.ControlPanel" t-inherit="web.ControlPanel" t-inherit-mode="extension">
        <!-- Hide Create/New button in start position -->
        <xpath expr="//div[hasclass('o_control_panel_main_buttons')][1]" position="attributes">
            <attribute name="class" separator=" " add="d-none"/>
        </xpath>

        <!-- And Create/New button in end position -->
        <xpath expr="//t[@t-slot='control-panel-navigation-additional']" position="after">
            <div class="o_control_panel_main_buttons d-flex gap-1 d-empty-none d-print-none" t-ref="mainButtonsEnd" t-on-keydown="onMainButtonsKeydown">
                <div class="btn-group d-xl-none o_control_panel_collapsed_create">
                    <t t-slot="control-panel-create-button"/>
                    <button t-att-class="{invisible: display.disableDropdown}" type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split o_control_panel_collapsed_create" data-bs-toggle="dropdown" aria-expanded="false">
                         <span class="visually-hidden">Toggle Dropdown</span>
                    </button>
                    <ul class="dropdown-menu o_control_panel_collapsed_create">
                        <t t-slot="layout-buttons"/>
                        <t t-slot="control-panel-always-buttons"/>
                    </ul>
                </div>
                <div class="d-none d-xl-inline-flex gap-1">
                    <t t-slot="layout-buttons"/>
                    <t t-slot="control-panel-always-buttons"/>
                    <t t-slot="control-panel-create-button"/>
                </div>
            </div>
        </xpath>

        <xpath expr="//div[hasclass('o_control_panel')]" position="attributes">
            <attribute name="class" separator=" " remove="pt-2 pb-3" add="py-3"/>
        </xpath>

        <xpath expr="//div[hasclass('o_control_panel_actions')]" position="attributes">
            <attribute name="class" separator=" " remove="justify-content-lg-around" add="justify-content-lg-between"/>
        </xpath>

        <xpath expr="//div[hasclass('o_control_panel_main')]" position="attributes">
            <attribute name="class" separator=" " remove="gap-3 align-items-lg-start" add="gap-2 align-items-center"/>
        </xpath>

        <!-- Move Actions button -->
        <xpath expr="//t[@t-slot='control-panel-navigation-additional']" position="after">
            <xpath expr="//div[hasclass('o_control_panel_breadcrumbs')]//t//section[hasclass('o_control_panel_breadcrumbs_actions')]/t[@t-slot='control-panel-additional-actions']" position="move"/>
        </xpath>

        <xpath expr="//div[hasclass('o_control_panel_navigation')]" position="attributes">
            <attribute name="class" separator=" " remove="gap-3 gap-lg-1 gap-xl-3 pt-1" add="gap-1 gap-lg-1 gap-xl-2"/>
        </xpath>

        <xpath expr="//div[hasclass('o_control_panel_breadcrumbs')]" position="attributes">
            <attribute name="class" separator=" " add="gap-2"/>
        </xpath>
    </t>

    <t t-name="pyper_control_panel.Breadcrumbs" t-inherit="web.Breadcrumbs" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('o_breadcrumb')]" position="attributes">
            <attribute name="class" separator=" " remove="flex-row flex-md-column"/>
        </xpath>

        <xpath expr="//div[hasclass('o_breadcrumb')]/t[@t-if='env.isSmall']" position="attributes">
            <attribute name="t-if">true</attribute>
        </xpath>

        <xpath expr="//button[hasclass('o_back_button')]" position="attributes">
            <attribute name="class" separator=" " remove="btn-link px-1" add="btn-primary"/>
        </xpath>

        <xpath expr="//button[hasclass('o_back_button')]/i" position="attributes">
            <attribute name="class">fa fa-arrow-left</attribute>
        </xpath>

        <xpath expr="//div[hasclass('o_breadcrumb')][1]//div[hasclass('o_last_breadcrumb_item')]" position="replace"/>

        <xpath expr="//div[hasclass('o_breadcrumb')][2]//div[hasclass('o_last_breadcrumb_item')]" position="attributes">
            <attribute name="class" add="fw-bolder" separator=" "/>
        </xpath>
    </t>

    <t t-name="pyper_control_panel.Breadcrumb.Actions" t-inherit="web.Breadcrumb.Actions" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('o_control_panel_breadcrumbs_actions')]" position="replace"/>
    </t>
</templates>
